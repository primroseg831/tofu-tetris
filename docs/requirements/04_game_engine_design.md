# ゲームエンジン設計 - 豆腐のテトリス

## ゲーム進行の主な処理フロー

1. ピース生成
2. ピースの落下（タイマー or プレイヤー操作）
3. 着地判定
4. 横一列の消去チェック
5. 3個以上の連結チェック → 崩壊
6. 崩壊後のピース再落下
7. 連鎖がなければ次のピースへ
8. 終了条件チェック

---

## 主な機能モジュールの候補

| 機能             | 役割                                 |
|------------------|--------------------------------------|
| PieceManager     | ピースの生成・回転・移動管理        |
| CollisionChecker | 着地・連結の判定                     |
| CollapseHandler  | 3個以上のピースを崩壊処理する        |
| GravityEngine    | 崩壊後のピースを横にスライドさせて落下|
| GameLoop         | ゲーム全体の進行管理                 |

---

## データ構造の基本イメージ

- ゲーム盤：2次元配列（10列×20行）
- ピース：配列 or オブジェクト（`blocks: Point[]`）
- 状態管理：現在のピース、スコア、連鎖数など

---

## 特記事項・課題

- 崩壊後の落下ピースの処理順（左？右？上？）
- 同時に複数の崩壊が起きた場合の優先処理
- 再帰的な崩壊処理（ループで回す or 再帰関数？）